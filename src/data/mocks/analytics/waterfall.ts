import type {
  WaterfallScenario,
  InvestorClass,
  WaterfallTier,
  WaterfallTemplate,
} from '@/types/waterfall';
import { calculateWaterfall } from '@/lib/calculations/waterfall';

// ============================================================================
// Investor Classes (Reusable)
// ============================================================================

export const mockInvestorClasses: InvestorClass[] = [
  {
    id: 'ic-1',
    name: 'Class A LPs',
    type: 'lp',
    ownershipPercentage: 70,
    commitment: 35_000_000,
    capitalCalled: 30_000_000,
    capitalReturned: 18_000_000,
    notes: 'Primary institutional investors',
    order: 0,
    createdAt: '2021-03-01T00:00:00Z',
    updatedAt: '2024-11-20T10:30:00Z',
  },
  {
    id: 'ic-2',
    name: 'Class B LPs',
    type: 'lp',
    ownershipPercentage: 10,
    commitment: 5_000_000,
    capitalCalled: 4_500_000,
    capitalReturned: 2_700_000,
    notes: 'Strategic co-investors',
    order: 1,
    createdAt: '2021-03-01T00:00:00Z',
    updatedAt: '2024-11-20T10:30:00Z',
  },
  {
    id: 'ic-3',
    name: 'GP & Management',
    type: 'gp',
    ownershipPercentage: 20,
    commitment: 10_000_000,
    capitalCalled: 8_000_000,
    capitalReturned: 4_800_000,
    notes: 'General Partner commitment',
    order: 2,
    createdAt: '2021-03-01T00:00:00Z',
    updatedAt: '2024-11-20T10:30:00Z',
  },
];

// ============================================================================
// Waterfall Tiers (Reusable)
// ============================================================================

// European Model Tiers
const europeanTiers: WaterfallTier[] = [
  {
    id: 'tier-eu-1',
    name: 'Return of Capital',
    type: 'roc',
    order: 0,
    lpPercentage: 100,
    gpCarryPercentage: 0,
    splitType: 'pro-rata',
    description: '100% to LPs until capital returned',
    isCustom: false,
  },
  {
    id: 'tier-eu-2',
    name: 'Preferred Return',
    type: 'preferred-return',
    order: 1,
    hurdleRate: 8,
    lpPercentage: 100,
    gpCarryPercentage: 0,
    splitType: 'pro-rata',
    description: '8% preferred return to LPs',
    isCustom: false,
  },
  {
    id: 'tier-eu-3',
    name: 'GP Catch-Up',
    type: 'catch-up',
    order: 2,
    gpCarryPercentage: 100,
    lpPercentage: 0,
    description: 'GP catches up to 20% of total profits',
    isCustom: false,
  },
  {
    id: 'tier-eu-4',
    name: 'Remaining Carry',
    type: 'carry',
    order: 3,
    gpCarryPercentage: 20,
    lpPercentage: 80,
    splitType: 'pro-rata',
    description: '80/20 split of remaining proceeds',
    isCustom: false,
  },
];

// American Model Tiers
const americanTiers: WaterfallTier[] = [
  {
    id: 'tier-am-1',
    name: 'Return of Capital',
    type: 'roc',
    order: 0,
    lpPercentage: 100,
    gpCarryPercentage: 0,
    splitType: 'pro-rata',
    description: '100% to LPs until capital returned',
    isCustom: false,
  },
  {
    id: 'tier-am-2',
    name: 'Preferred Return',
    type: 'preferred-return',
    order: 1,
    hurdleRate: 8,
    lpPercentage: 100,
    gpCarryPercentage: 0,
    splitType: 'pro-rata',
    description: '8% preferred return to LPs',
    isCustom: false,
  },
  {
    id: 'tier-am-3',
    name: 'Carry on All Proceeds',
    type: 'carry',
    order: 2,
    gpCarryPercentage: 20,
    lpPercentage: 80,
    splitType: 'pro-rata',
    description: '80/20 split on all remaining proceeds (deal-by-deal)',
    isCustom: false,
  },
];

// ============================================================================
// Waterfall Scenarios
// ============================================================================

export const mockWaterfallScenarios: WaterfallScenario[] = [
  // Scenario 1: European Model - Base Case
  {
    id: 'scenario-1',
    name: 'Fund II European - Base Case',
    description: 'Conservative exit scenario with European waterfall model',
    fundId: 'fund-2',
    fundName: 'Quantum Ventures Fund II',
    model: 'european',
    investorClasses: mockInvestorClasses,
    tiers: europeanTiers,
    exitValue: 200_000_000,
    totalInvested: 50_000_000,
    managementFees: 5_000_000,
    results: {
      totalExitValue: 200_000_000,
      totalInvested: 50_000_000,
      totalReturned: 200_000_000,
      gpCarry: 28_500_000,
      gpCarryPercentage: 14.25,
      gpManagementFees: 5_000_000,
      gpTotalReturn: 33_500_000,
      lpTotalReturn: 171_500_000,
      lpAverageMultiple: 3.43,
      investorClassResults: [
        {
          investorClassId: 'ic-1',
          investorClassName: 'Class A LPs',
          invested: 35_000_000,
          returned: 120_050_000,
          multiple: 3.43,
          irr: 28.5,
          carry: 0,
          netReturn: 85_050_000,
          profit: 85_050_000,
          allocations: [],
        },
        {
          investorClassId: 'ic-2',
          investorClassName: 'Class B LPs',
          invested: 5_000_000,
          returned: 17_150_000,
          multiple: 3.43,
          irr: 28.5,
          carry: 0,
          netReturn: 12_150_000,
          profit: 12_150_000,
          allocations: [],
        },
        {
          investorClassId: 'ic-3',
          investorClassName: 'GP & Management',
          invested: 10_000_000,
          returned: 62_800_000,
          multiple: 6.28,
          irr: 45.2,
          carry: 28_500_000,
          netReturn: 52_800_000,
          profit: 52_800_000,
          allocations: [],
        },
      ],
      tierBreakdown: [
        {
          tierId: 'tier-eu-1',
          tierName: 'Return of Capital',
          tierType: 'roc',
          totalAmount: 50_000_000,
          gpAmount: 0,
          lpAmount: 50_000_000,
          percentage: 25,
          cumulativeAmount: 50_000_000,
          allocations: [],
        },
        {
          tierId: 'tier-eu-2',
          tierName: 'Preferred Return',
          tierType: 'preferred-return',
          totalAmount: 12_000_000,
          gpAmount: 0,
          lpAmount: 12_000_000,
          percentage: 6,
          cumulativeAmount: 62_000_000,
          allocations: [],
        },
        {
          tierId: 'tier-eu-3',
          tierName: 'GP Catch-Up',
          tierType: 'catch-up',
          totalAmount: 15_500_000,
          gpAmount: 15_500_000,
          lpAmount: 0,
          percentage: 7.75,
          cumulativeAmount: 77_500_000,
          allocations: [],
        },
        {
          tierId: 'tier-eu-4',
          tierName: 'Remaining Carry',
          tierType: 'carry',
          totalAmount: 122_500_000,
          gpAmount: 24_500_000,
          lpAmount: 98_000_000,
          percentage: 61.25,
          cumulativeAmount: 200_000_000,
          allocations: [],
        },
      ],
    },
    isFavorite: true,
    isTemplate: false,
    version: 3,
    createdAt: '2024-09-15T10:00:00Z',
    updatedAt: '2024-11-18T14:30:00Z',
    createdBy: 'Alex Chen',
    tags: ['base-case', 'european', 'fund-ii'],
  },

  // Scenario 2: American Model - Upside Case
  {
    id: 'scenario-2',
    name: 'Fund II American - Upside Case',
    description: 'Aggressive exit scenario with American waterfall model',
    fundId: 'fund-2',
    fundName: 'Quantum Ventures Fund II',
    model: 'american',
    investorClasses: mockInvestorClasses,
    tiers: americanTiers,
    exitValue: 350_000_000,
    totalInvested: 50_000_000,
    managementFees: 5_000_000,
    results: {
      totalExitValue: 350_000_000,
      totalInvested: 50_000_000,
      totalReturned: 350_000_000,
      gpCarry: 57_600_000,
      gpCarryPercentage: 16.46,
      gpManagementFees: 5_000_000,
      gpTotalReturn: 62_600_000,
      lpTotalReturn: 292_400_000,
      lpAverageMultiple: 5.85,
      investorClassResults: [
        {
          investorClassId: 'ic-1',
          investorClassName: 'Class A LPs',
          invested: 35_000_000,
          returned: 204_680_000,
          multiple: 5.85,
          irr: 42.3,
          carry: 0,
          netReturn: 169_680_000,
          profit: 169_680_000,
          allocations: [],
        },
        {
          investorClassId: 'ic-2',
          investorClassName: 'Class B LPs',
          invested: 5_000_000,
          returned: 29_240_000,
          multiple: 5.85,
          irr: 42.3,
          carry: 0,
          netReturn: 24_240_000,
          profit: 24_240_000,
          allocations: [],
        },
        {
          investorClassId: 'ic-3',
          investorClassName: 'GP & Management',
          invested: 10_000_000,
          returned: 116_080_000,
          multiple: 11.61,
          irr: 68.5,
          carry: 57_600_000,
          netReturn: 106_080_000,
          profit: 106_080_000,
          allocations: [],
        },
      ],
      tierBreakdown: [
        {
          tierId: 'tier-am-1',
          tierName: 'Return of Capital',
          tierType: 'roc',
          totalAmount: 50_000_000,
          gpAmount: 0,
          lpAmount: 50_000_000,
          percentage: 14.29,
          cumulativeAmount: 50_000_000,
          allocations: [],
        },
        {
          tierId: 'tier-am-2',
          tierName: 'Preferred Return',
          tierType: 'preferred-return',
          totalAmount: 12_000_000,
          gpAmount: 0,
          lpAmount: 12_000_000,
          percentage: 3.43,
          cumulativeAmount: 62_000_000,
          allocations: [],
        },
        {
          tierId: 'tier-am-3',
          tierName: 'Carry on All Proceeds',
          tierType: 'carry',
          totalAmount: 288_000_000,
          gpAmount: 57_600_000,
          lpAmount: 230_400_000,
          percentage: 82.29,
          cumulativeAmount: 350_000_000,
          allocations: [],
        },
      ],
    },
    isFavorite: true,
    isTemplate: false,
    version: 2,
    createdAt: '2024-09-20T11:30:00Z',
    updatedAt: '2024-11-19T09:15:00Z',
    createdBy: 'Sarah Martinez',
    tags: ['upside', 'american', 'fund-ii'],
  },

  // Scenario 3: European Model - Downside Case
  {
    id: 'scenario-3',
    name: 'Fund II European - Downside Case',
    description: 'Conservative scenario with lower exit value',
    fundId: 'fund-2',
    fundName: 'Quantum Ventures Fund II',
    model: 'european',
    investorClasses: mockInvestorClasses,
    tiers: europeanTiers,
    exitValue: 85_000_000,
    totalInvested: 50_000_000,
    managementFees: 5_000_000,
    results: {
      totalExitValue: 85_000_000,
      totalInvested: 50_000_000,
      totalReturned: 85_000_000,
      gpCarry: 4_625_000,
      gpCarryPercentage: 5.44,
      gpManagementFees: 5_000_000,
      gpTotalReturn: 9_625_000,
      lpTotalReturn: 75_375_000,
      lpAverageMultiple: 1.51,
      investorClassResults: [
        {
          investorClassId: 'ic-1',
          investorClassName: 'Class A LPs',
          invested: 35_000_000,
          returned: 52_762_500,
          multiple: 1.51,
          irr: 12.8,
          carry: 0,
          netReturn: 17_762_500,
          profit: 17_762_500,
          allocations: [],
        },
        {
          investorClassId: 'ic-2',
          investorClassName: 'Class B LPs',
          invested: 5_000_000,
          returned: 7_537_500,
          multiple: 1.51,
          irr: 12.8,
          carry: 0,
          netReturn: 2_537_500,
          profit: 2_537_500,
          allocations: [],
        },
        {
          investorClassId: 'ic-3',
          investorClassName: 'GP & Management',
          invested: 10_000_000,
          returned: 24_700_000,
          multiple: 2.47,
          irr: 22.5,
          carry: 4_625_000,
          netReturn: 14_700_000,
          profit: 14_700_000,
          allocations: [],
        },
      ],
      tierBreakdown: [
        {
          tierId: 'tier-eu-1',
          tierName: 'Return of Capital',
          tierType: 'roc',
          totalAmount: 50_000_000,
          gpAmount: 0,
          lpAmount: 50_000_000,
          percentage: 58.82,
          cumulativeAmount: 50_000_000,
          allocations: [],
        },
        {
          tierId: 'tier-eu-2',
          tierName: 'Preferred Return',
          tierType: 'preferred-return',
          totalAmount: 12_000_000,
          gpAmount: 0,
          lpAmount: 12_000_000,
          percentage: 14.12,
          cumulativeAmount: 62_000_000,
          allocations: [],
        },
        {
          tierId: 'tier-eu-3',
          tierName: 'GP Catch-Up',
          tierType: 'catch-up',
          totalAmount: 5_781_250,
          gpAmount: 5_781_250,
          lpAmount: 0,
          percentage: 6.8,
          cumulativeAmount: 67_781_250,
          allocations: [],
        },
        {
          tierId: 'tier-eu-4',
          tierName: 'Remaining Carry',
          tierType: 'carry',
          totalAmount: 17_218_750,
          gpAmount: 3_443_750,
          lpAmount: 13_775_000,
          percentage: 20.26,
          cumulativeAmount: 85_000_000,
          allocations: [],
        },
      ],
    },
    isFavorite: false,
    isTemplate: false,
    version: 1,
    createdAt: '2024-10-05T14:20:00Z',
    updatedAt: '2024-10-05T14:20:00Z',
    createdBy: 'Michael Park',
    tags: ['downside', 'european', 'fund-ii'],
  },

  // Scenario 4: Custom Multi-Tier Scenario
  {
    id: 'scenario-4',
    name: 'Fund III Custom Multi-Tier',
    description: 'Custom waterfall with multiple carry tiers',
    fundId: 'fund-3',
    fundName: 'Quantum Ventures Fund III',
    model: 'european',
    investorClasses: [
      {
        id: 'ic-4',
        name: 'Institutional LPs',
        type: 'lp',
        ownershipPercentage: 75,
        commitment: 225_000_000,
        capitalCalled: 33_750_000,
        capitalReturned: 0,
        order: 0,
        createdAt: '2024-01-15T00:00:00Z',
        updatedAt: '2024-11-20T10:30:00Z',
      },
      {
        id: 'ic-5',
        name: 'GP & Principals',
        type: 'gp',
        ownershipPercentage: 25,
        commitment: 75_000_000,
        capitalCalled: 11_250_000,
        capitalReturned: 0,
        order: 1,
        createdAt: '2024-01-15T00:00:00Z',
        updatedAt: '2024-11-20T10:30:00Z',
      },
    ],
    tiers: [
      {
        id: 'tier-custom-1',
        name: 'Return of Capital',
        type: 'roc',
        order: 0,
        lpPercentage: 100,
        gpCarryPercentage: 0,
        splitType: 'pro-rata',
        description: '100% to LPs until capital returned',
        isCustom: false,
      },
      {
        id: 'tier-custom-2',
        name: 'Preferred Return (8%)',
        type: 'preferred-return',
        order: 1,
        hurdleRate: 8,
        lpPercentage: 100,
        gpCarryPercentage: 0,
        splitType: 'pro-rata',
        description: '8% preferred return to LPs',
        isCustom: false,
      },
      {
        id: 'tier-custom-3',
        name: 'First Tier Carry (15%)',
        type: 'carry',
        order: 2,
        threshold: 100_000_000,
        gpCarryPercentage: 15,
        lpPercentage: 85,
        splitType: 'pro-rata',
        description: '85/15 split up to 2x MOIC',
        isCustom: true,
      },
      {
        id: 'tier-custom-4',
        name: 'Second Tier Carry (20%)',
        type: 'carry',
        order: 3,
        threshold: 200_000_000,
        gpCarryPercentage: 20,
        lpPercentage: 80,
        splitType: 'pro-rata',
        description: '80/20 split above 2x MOIC',
        isCustom: true,
      },
    ],
    exitValue: 150_000_000,
    totalInvested: 45_000_000,
    managementFees: 3_000_000,
    isFavorite: false,
    isTemplate: false,
    version: 1,
    createdAt: '2024-11-10T16:45:00Z',
    updatedAt: '2024-11-10T16:45:00Z',
    createdBy: 'Emma Wilson',
    tags: ['custom', 'multi-tier', 'fund-iii'],
  },
];

mockWaterfallScenarios.forEach((scenario) => {
  if (!scenario.results) {
    scenario.results = calculateWaterfall(scenario);
  }
});

// ============================================================================
// Waterfall Templates
// ============================================================================

export const mockWaterfallTemplates: WaterfallTemplate[] = [
  {
    id: 'template-1',
    name: 'Standard 2/20',
    description: 'Classic VC waterfall with 8% hurdle and 20% carry',
    model: 'european',
    tiers: [
      {
        name: 'Return of Capital',
        type: 'roc',
        order: 0,
        lpPercentage: 100,
        gpCarryPercentage: 0,
        splitType: 'pro-rata',
        description: '100% to LPs until capital returned',
        isCustom: false,
      },
      {
        name: 'Preferred Return',
        type: 'preferred-return',
        order: 1,
        hurdleRate: 8,
        lpPercentage: 100,
        gpCarryPercentage: 0,
        splitType: 'pro-rata',
        description: '8% preferred return to LPs',
        isCustom: false,
      },
      {
        name: 'GP Catch-Up',
        type: 'catch-up',
        order: 2,
        gpCarryPercentage: 100,
        lpPercentage: 0,
        description: 'GP catches up to 20%',
        isCustom: false,
      },
      {
        name: 'Remaining Carry',
        type: 'carry',
        order: 3,
        gpCarryPercentage: 20,
        lpPercentage: 80,
        splitType: 'pro-rata',
        description: '80/20 split',
        isCustom: false,
      },
    ],
    isSystem: true,
    createdAt: '2024-01-01T00:00:00Z',
    updatedAt: '2024-01-01T00:00:00Z',
  },
  {
    id: 'template-4',
    name: 'Multi-Tier Carry',
    description: 'Step-up carry structure with multiple tiers',
    model: 'european',
    tiers: [
      {
        name: 'Return of Capital',
        type: 'roc',
        order: 0,
        lpPercentage: 100,
        gpCarryPercentage: 0,
        splitType: 'pro-rata',
        description: '100% to LPs until capital returned',
        isCustom: false,
      },
      {
        name: 'Preferred Return',
        type: 'preferred-return',
        order: 1,
        hurdleRate: 8,
        lpPercentage: 100,
        gpCarryPercentage: 0,
        splitType: 'pro-rata',
        description: '8% preferred return to LPs',
        isCustom: false,
      },
      {
        name: 'GP Catch-Up',
        type: 'catch-up',
        order: 2,
        gpCarryPercentage: 100,
        lpPercentage: 0,
        description: 'GP catches up to carry target',
        isCustom: false,
      },
      {
        name: 'Carry Tier 1',
        type: 'carry',
        order: 3,
        threshold: 100_000_000,
        gpCarryPercentage: 20,
        lpPercentage: 80,
        splitType: 'pro-rata',
        description: '80/20 split up to 2x',
        isCustom: false,
      },
      {
        name: 'Carry Tier 2',
        type: 'carry',
        order: 4,
        threshold: 200_000_000,
        gpCarryPercentage: 30,
        lpPercentage: 70,
        splitType: 'pro-rata',
        description: '70/30 split above 2x',
        isCustom: false,
      },
    ],
    isSystem: true,
    createdAt: '2024-01-01T00:00:00Z',
    updatedAt: '2024-01-01T00:00:00Z',
  },
  {
    id: 'template-2',
    name: 'European 1.5/15',
    description: 'Conservative European model with lower carry',
    model: 'european',
    tiers: [
      {
        name: 'Return of Capital',
        type: 'roc',
        order: 0,
        lpPercentage: 100,
        gpCarryPercentage: 0,
        splitType: 'pro-rata',
        isCustom: false,
      },
      {
        name: 'Preferred Return',
        type: 'preferred-return',
        order: 1,
        hurdleRate: 6,
        lpPercentage: 100,
        gpCarryPercentage: 0,
        splitType: 'pro-rata',
        isCustom: false,
      },
      {
        name: 'GP Catch-Up',
        type: 'catch-up',
        order: 2,
        gpCarryPercentage: 100,
        lpPercentage: 0,
        isCustom: false,
      },
      {
        name: 'Remaining Carry',
        type: 'carry',
        order: 3,
        gpCarryPercentage: 15,
        lpPercentage: 85,
        splitType: 'pro-rata',
        isCustom: false,
      },
    ],
    isSystem: true,
    createdAt: '2024-01-01T00:00:00Z',
    updatedAt: '2024-01-01T00:00:00Z',
  },
  {
    id: 'template-3',
    name: 'American Deal-by-Deal',
    description: 'American waterfall with deal-by-deal carry',
    model: 'american',
    tiers: [
      {
        name: 'Return of Capital',
        type: 'roc',
        order: 0,
        lpPercentage: 100,
        gpCarryPercentage: 0,
        splitType: 'pro-rata',
        isCustom: false,
      },
      {
        name: 'Preferred Return',
        type: 'preferred-return',
        order: 1,
        hurdleRate: 8,
        lpPercentage: 100,
        gpCarryPercentage: 0,
        splitType: 'pro-rata',
        isCustom: false,
      },
      {
        name: 'Carry on All Proceeds',
        type: 'carry',
        order: 2,
        gpCarryPercentage: 20,
        lpPercentage: 80,
        splitType: 'pro-rata',
        isCustom: false,
      },
    ],
    isSystem: true,
    createdAt: '2024-01-01T00:00:00Z',
    updatedAt: '2024-01-01T00:00:00Z',
  },
];
